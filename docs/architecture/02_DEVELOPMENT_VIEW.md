# Vista de Desarrollo - Modelo 4+1

## DescripciÃ³n General

La Vista de Desarrollo describe la organizaciÃ³n del cÃ³digo fuente en mÃ³dulos, paquetes y capas. Define cÃ³mo los desarrolladores estructuran y mantienen el sistema.

---

## Diagrama de Componentes

### Instrucciones para el diagrama

Crear un **diagrama de componentes UML** mostrando la estructura modular:

---

## Estructura del Backend Python

```
PulmoMed-Backend/
â”‚
â”œâ”€â”€ main.py                      # Entry point - FastAPI app
â”‚
â”œâ”€â”€ app/                         # CÃ³digo principal
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                     # ğŸŒ Capa de PresentaciÃ³n
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ teacher_endpoint.py  # REST endpoints
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # ğŸ’¼ Capa de Negocio
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ teacher_service.py   # AITeacherService
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/            # ğŸ’¾ Capa de Datos
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ medical_knowledge_repo.py  # ChromaDB abstraction
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                  # ğŸ“¦ Modelos de Dominio
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ simulation_state.py  # Pydantic models
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                     # ğŸ¤– IntegraciÃ³n LLM
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ interface.py         # LLMClient Protocol
â”‚   â”‚   â”œâ”€â”€ ollama_client.py     # ImplementaciÃ³n Ollama
â”‚   â”‚   â””â”€â”€ mock_llm.py          # Mock para tests
â”‚   â”‚
â”‚   â”œâ”€â”€ rag/                     # ğŸ“š Sistema RAG
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ prompts.py           # Templates de prompts
â”‚   â”‚   â””â”€â”€ loader.py            # PDF indexer
â”‚   â”‚
â”‚   â””â”€â”€ core/                    # âš™ï¸ ConfiguraciÃ³n
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ config.py            # Settings (Pydantic)
â”‚
â”œâ”€â”€ knowledge_base/              # ğŸ“– Base de Conocimiento
â”‚   â”œâ”€â”€ embeddings/              # ChromaDB persistence
â”‚   â””â”€â”€ casos_biblioteca.json    # Casos predefinidos SEER
â”‚
â”œâ”€â”€ tests/                       # ğŸ§ª Tests
â”‚   â”œâ”€â”€ unit/
â”‚   â””â”€â”€ integration/
â”‚
â””â”€â”€ CSharp_MathModel/            # ğŸ® CÃ³digo Unity (referencia)
    â”œâ”€â”€ Core/
    â”œâ”€â”€ Models/
    â”œâ”€â”€ Solvers/
    â””â”€â”€ Treatments/
```

---

## Diagrama de Capas (Layered Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE PRESENTACIÃ“N                       â”‚
â”‚                         (app.api)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ /consultar_     â”‚  â”‚ /health         â”‚  â”‚ /library_cases  â”‚ â”‚
â”‚  â”‚ profesor        â”‚  â”‚                 â”‚  â”‚ /{case_id}      â”‚ â”‚
â”‚  â”‚ [POST]          â”‚  â”‚ [GET]           â”‚  â”‚ [GET]           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                    â”‚                    â”‚           â”‚
â”‚           â–¼                    â–¼                    â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              FastAPI Router (teacher_endpoint.py)           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE SERVICIOS                          â”‚
â”‚                       (app.services)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    AITeacherService                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚ Build Query   â”‚â†’ â”‚ RAG Retrieval â”‚â†’ â”‚ LLM Query     â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                              â”‚                  â”‚           â”‚â”‚
â”‚  â”‚                              â–¼                  â–¼           â”‚â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
â”‚  â”‚                    â”‚ Rerank/Filter â”‚  â”‚ Parse Responseâ”‚    â”‚â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA RAG       â”‚  â”‚  CAPA LLM       â”‚  â”‚  CAPA DATOS     â”‚
â”‚  (app.rag)      â”‚  â”‚  (app.llm)      â”‚  â”‚  (app.repositories)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PromptTemplates â”‚  â”‚ LLMClient       â”‚  â”‚ MedicalKnowledgeâ”‚
â”‚ MedicalPDFLoaderâ”‚  â”‚ OllamaClient    â”‚  â”‚ Repository      â”‚
â”‚                 â”‚  â”‚ MockLLM         â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INFRAESTRUCTURA EXTERNA                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    ChromaDB     â”‚  â”‚  Ollama Server  â”‚  â”‚ File System     â”‚ â”‚
â”‚  â”‚  (Vector DB)    â”‚  â”‚  (LLM Local)    â”‚  â”‚ (PDFs, JSON)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Estructura del Cliente Unity (C#)

```
Assets/Scripts/
â”‚
â”œâ”€â”€ MathModel/                   # ğŸ§® Modelo MatemÃ¡tico
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â””â”€â”€ TumorGrowthModel.cs  # Ecuaciones Gompertz
â”‚   â”‚
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ PatientProfile.cs    # Perfil del paciente
â”‚   â”‚   â””â”€â”€ SimulationState.cs   # Estado serializable
â”‚   â”‚
â”‚   â”œâ”€â”€ Solvers/
â”‚   â”‚   â””â”€â”€ RK4Solver.cs         # Integrador numÃ©rico
â”‚   â”‚
â”‚   â””â”€â”€ Treatments/
â”‚       â””â”€â”€ ITreatmentStrategy.cs # Estrategias de tratamiento
â”‚
â”œâ”€â”€ Networking/                  # ğŸŒ ComunicaciÃ³n HTTP
â”‚   â””â”€â”€ BackendClient.cs         # Llamadas al API Python
â”‚
â”œâ”€â”€ VR/                          # ğŸ¥½ Componentes VR
â”‚   â”œâ”€â”€ TumorVisualization.cs    # Renderizado 3D del tumor
â”‚   â”œâ”€â”€ PatientUIController.cs   # UI de parÃ¡metros
â”‚   â””â”€â”€ TeacherFeedbackUI.cs     # Muestra respuesta IA
â”‚
â””â”€â”€ Simulation/                  # ğŸ® Control de SimulaciÃ³n
    â”œâ”€â”€ SimulationManager.cs     # Orquestador principal
    â”œâ”€â”€ ModeController.cs        # Modo libre/biblioteca
    â””â”€â”€ ExamController.cs        # Sistema de exÃ¡menes
```

---

## Diagrama de Componentes Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           <<subsystem>>                                 â”‚
â”‚                         PulmoMed Backend                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚   <<component>>    â”‚   <<component>>    â”‚   <<component>>          â”‚
â”‚   â”‚   FastAPI App â”‚    â”‚   AITeacher  â”‚     â”‚   RAG Engine â”‚           â”‚
â”‚   â”‚               â”‚    â”‚   Service    â”‚     â”‚              â”‚           â”‚
â”‚   â”‚ â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â–¶â”‚â—            â”‚â”€â”€â”€â”€â–¶â”‚â—             â”‚           â”‚
â”‚   â”‚   REST API    â”‚    â”‚              â”‚     â”‚              â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                               â”‚                    â”‚                    â”‚
â”‚                               â–¼                    â–¼                    â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                        â”‚   <<component>>    â”‚   <<component>>          â”‚
â”‚                        â”‚   LLM Client â”‚     â”‚   Vector DB  â”‚           â”‚
â”‚                        â”‚              â”‚     â”‚   Repository â”‚           â”‚
â”‚                        â”‚ â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚â—             â”‚           â”‚
â”‚                        â”‚   Ollama     â”‚     â”‚   ChromaDB   â”‚           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           <<subsystem>>                                 â”‚
â”‚                         Unity VR Client                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚   <<component>>    â”‚   <<component>>    â”‚   <<component>>          â”‚
â”‚   â”‚   VR Engine  â”‚     â”‚   Simulation â”‚     â”‚   Math Model â”‚           â”‚
â”‚   â”‚              â”‚â—€â”€â”€â”€â”€â”‚   Manager    â”‚â”€â”€â”€â”€â–¶â”‚              â”‚           â”‚
â”‚   â”‚ â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚â—             â”‚     â”‚ Gompertz     â”‚           â”‚
â”‚   â”‚   Rendering  â”‚     â”‚              â”‚     â”‚ Equations    â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                               â”‚                                         â”‚
â”‚                               â”‚ HTTP                                    â”‚
â”‚                               â–¼                                         â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚   <<component>>                                â”‚
â”‚                        â”‚   Backend    â”‚                                 â”‚
â”‚                        â”‚   Client     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚
â”‚                        â”‚              â”‚        API Calls                â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Leyenda:
â—‹ = Interfaz proporcionada (provided interface)
â— = Interfaz requerida (required interface)
```

---

## Dependencias entre MÃ³dulos

### Backend Python

| MÃ³dulo | Depende de | Tipo |
|--------|------------|------|
| `app.api` | `app.services`, `app.models` | Import directo |
| `app.services` | `app.repositories`, `app.llm`, `app.rag`, `app.models` | InyecciÃ³n |
| `app.repositories` | `chromadb`, `sentence-transformers` | LibrerÃ­a externa |
| `app.llm` | `httpx` (para Ollama) | LibrerÃ­a externa |
| `app.rag` | `pypdf` | LibrerÃ­a externa |
| `app.core` | `pydantic-settings` | LibrerÃ­a externa |

### Cliente Unity (C#)

| MÃ³dulo | Depende de | Tipo |
|--------|------------|------|
| `Simulation` | `MathModel`, `Networking`, `VR` | Referencia directa |
| `MathModel` | Ninguno (autocontenido) | - |
| `Networking` | `UnityEngine.Networking` | Unity API |
| `VR` | `UnityEngine.XR` | Unity API |

---

## Convenciones de CÃ³digo

### Python
```python
# Estructura de imports
from __future__ import annotations  # Type hints modernos
from typing import List, Dict, Optional  # Typing
from pydantic import BaseModel, Field  # ValidaciÃ³n

# Naming conventions
class AITeacherService:      # PascalCase para clases
    def get_educational_feedback(self):  # snake_case para mÃ©todos
        pass

# Constantes en config.py
MAX_PACK_YEARS: float = 150.0  # UPPER_SNAKE_CASE
```

### C# (Unity)
```csharp
// Namespace estÃ¡ndar
namespace LungCancerVR.MathModel
{
    // PascalCase para todo pÃºblico
    public class TumorGrowthModel
    {
        private float _sensitiveCells;  // _camelCase para privados
        public float SensitiveCells => _sensitiveCells;  // Property PascalCase
    }
}
```

---

## GestiÃ³n de Dependencias

### Python (requirements.txt)
```
# Core
fastapi==0.109.0
uvicorn[standard]==0.27.0
pydantic==2.5.3

# RAG
chromadb==0.4.22
sentence-transformers==2.3.1

# LLM
httpx==0.26.0

# Testing
pytest==7.4.4
pytest-asyncio==0.23.3
```

### Unity (Package Manager)
- TextMeshPro (UI)
- XR Interaction Toolkit (VR)
- Newtonsoft.Json (SerializaciÃ³n)

---

## Herramienta Recomendada

- **Draw.io** o **Lucidchart** para diagramas de componentes
- Usar notaciÃ³n UML 2.0 estÃ¡ndar
- Exportar en PNG/SVG para documentaciÃ³n
